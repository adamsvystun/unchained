{"version":3,"sources":["webpack:///./src/api/sockets.js?e9c6","webpack:///./src/components/ChannelInput/index.js?52d1"],"names":["wsocket","WebSocket","window","location","host","console","log","onopen","onOpen","onerror","onError","store","dispatch","type","payload","channel","e","send","msg","sendMessage","text","user","pub_date","message","onmessage","data","JSON","parse","addMessage","messages","forEach","o","ChannelInput","input","document","getElementById","value","Date","now","props","onSend","bind"],"mappings":";;;;;;;;;;AAAA;AACA;;AAEA,IAAIA,UAAU,IAAIC,SAAJ,CAAc,UAASC,OAAOC,QAAP,CAAgBC,IAAzB,GAA+B,aAA7C,CAAd;AACAC,QAAQC,GAAR,CAAYN,OAAZ;AACAA,QAAQO,MAAR,GAAiBC,MAAjB;AACAR,QAAQS,OAAR,GAAkBC,OAAlB;;AAEA,uDAAAC,CAAMC,QAAN,CAAe;AACXC,UAAM,aADK;AAEXC,aAAS;AACLC,iBAAS;AADJ;AAFE,CAAf;AAMA,SAASP,MAAT,CAAgBQ,CAAhB,EAAmB;AACfX,YAAQC,GAAR,CAAYU,CAAZ;AACH;AACD,SAASN,OAAT,CAAiBM,CAAjB,EAAoB;AAChBX,YAAQC,GAAR,CAAYU,CAAZ;AACH;AACM,SAASC,IAAT,CAAcC,GAAd,EAAmB;AACtBlB,YAAQiB,IAAR,CAAaC,GAAb;AACH;AACM,SAASC,WAAT,OAAuD;AAAA,QAAhCC,IAAgC,QAAhCA,IAAgC;AAAA,QAA1BC,IAA0B,QAA1BA,IAA0B;AAAA,QAApBC,QAAoB,QAApBA,QAAoB;AAAA,QAAVP,OAAU,QAAVA,OAAU;;AAC1Df,YAAQiB,IAAR,CAAa;AACTJ,cAAK,YADI;AAETU,iBAAS;AACLH,kBAAMA,IADD;AAELC,kBAAMA,IAFD;AAGLC,sBAAUA,QAHL;AAILP,qBAASA;AAJJ;AAFA,KAAb;AASH;;AAEDf,QAAQwB,SAAR,GAAoB,aAAK;AACrB,QAAIC,OAAOC,KAAKC,KAAL,CAAWX,EAAES,IAAb,CAAX;AACA,YAAQA,KAAKZ,IAAb;AACI,aAAK,YAAL;AAAmB;AACfF,gBAAA,uDAAAA,CAAMC,QAAN,CAAe,2FAAAgB,CAAWH,KAAKF,OAAhB,CAAf;AACA;AACH;AACD,aAAK,eAAL;AAAsB;AAClBE,qBAAKI,QAAL,CAAcC,OAAd,CAAsB,UAACC,CAAD,EAAK;AACvBH,oBAAA,2FAAAA,CAAWG,CAAX;AACH,iBAFD;AAGA;AACH;AAVL;AAYH,CAdD,C;;;;;;;;;;;;;;;;;;;;;;;ACnCA;AACA;;AAEA;;IAEMC,Y;;;;;;;;;;;iCACO;AACL,gBAAIC,QAAQC,SAASC,cAAT,CAAwB,sBAAxB,CAAZ;AACAhB,YAAA,wFAAAA,CAAY;AACRC,sBAAMa,MAAMG,KADJ;AAERd,0BAAUe,KAAKC,GAAL,EAFF;AAGRjB,sBAAM,YAHE;AAIRN,yBAAS,KAAKwB,KAAL,CAAWxB;AAJZ,aAAZ;AAMAkB,kBAAMG,KAAN,GAAc,EAAd;AACH;;;iCACQ;AACL,mBAAQ;AAAA;AAAA,kBAAK,WAAU,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACJ;AAAA;AAAA,sBAAK,WAAU,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,2FAAO,MAAK,MAAZ,EAAmB,IAAG,sBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ,iBADI;AAIJ;AAAA;AAAA,sBAAK,IAAG,uBAAR,EAAgC,SAAS,KAAKI,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJI,aAAR;AAQH;;;;EApBsB,gD;;AAuB3B,yDAAeT,YAAf,E","file":"0.dead142606dfec1b57d2.hot-update.js","sourcesContent":["import store from '../store'\nimport { addMessage } from '../actions/message'\n\nlet wsocket = new WebSocket(\"ws://\"+ window.location.host +\"/websocket1\")\nconsole.log(wsocket)\nwsocket.onopen = onOpen\nwsocket.onerror = onError\n\nstore.dispatch({\n    type: \"ADD_MESSAGE\",\n    payload: {\n        channel: 1\n    }\n})\nfunction onOpen(e) {\n    console.log(e)\n}\nfunction onError(e) {\n    console.log(e)\n}\nexport function send(msg) {\n    wsocket.send(msg)\n}\nexport function sendMessage({ text, user, pub_date, channel}) {\n    wsocket.send({\n        type:\"addMessage\",\n        message: {\n            text: text,\n            user: user,\n            pub_date: pub_date,\n            channel: channel\n        }\n    })\n}\n\nwsocket.onmessage = e => {\n    let data = JSON.parse(e.data);\n    switch (data.type) {\n        case \"addMessage\": {\n            store.dispatch(addMessage(data.message));\n            break\n        }\n        case \"fetchMessages\": {\n            data.messages.forEach((o)=>{\n                addMessage(o)\n            })\n            break\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/sockets.js","import React, { Component } from 'react'\nimport { sendMessage } from '../../api/sockets'\n\nimport './styles.css'\n\nclass ChannelInput extends Component {\n    onSend() {\n        var input = document.getElementById(\"channel-input__input\")\n        sendMessage({\n            text: input.value,\n            pub_date: Date.now(),\n            user: \"Annonymous\",\n            channel: this.props.channel\n        })\n        input.value = \"\"\n    }\n    render() {\n        return (<div className=\"channel-input\">\n            <div className=\"channel-input__wrap\">\n                <input type=\"text\" id=\"channel-input__input\" />\n            </div>\n            <div id=\"channel-input__submit\" onClick={this.onSend.bind(this)}>\n                Send\n            </div>\n        </div>)\n    }\n}\n\nexport default ChannelInput\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ChannelInput/index.js"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/api/sockets.js?e9c6","webpack:///./src/components/ChannelInput/index.js?52d1","webpack:///./src/containers/ChannelPage/index.js?08d2"],"names":["wsocket","openChannel","id","WebSocket","window","location","host","closeChannel","close","sendMessage","text","user","pub_date","channel","send","JSON","stringify","type","message","onmessage","data","parse","e","store","dispatch","addMessage","messages","forEach","o","ChannelInput","input","document","getElementById","value","Date","now","props","onSend","bind","ChannelPage","match","params","filter","mapStateToProps","state","connect"],"mappings":"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","file":"0.6c6d7e40dd6a398b3bc8.hot-update.js","sourcesContent":["import store from '../store'\nimport { addMessage } from '../actions/message'\nvar wsocket;\n\nexport function openChannel(id){\n     wsocket = new WebSocket(\"ws://\"+ window.location.host +\"/websocket/\"+id)\n}\n\nexport function closeChannel(){\n     wsocket.close()\n}\n\nexport function sendMessage({ text, user, pub_date, channel}) {\n    wsocket.send(JSON.stringify({\n        type: \"addMessage\",\n        message: {\n            text: text,\n            user: user,\n            pub_date: pub_date,\n            channel: channel\n        }\n    }))\n}\n\nwsocket.onmessage = e => {\n    let data = JSON.parse(e.data);\n    switch (data.type) {\n        case \"addMessage\": {\n            store.dispatch(addMessage(data.message));\n            break\n        }\n        case \"fetchMessages\": {\n            data.messages.forEach((o)=>{\n                addMessage(o)\n            })\n            break\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/sockets.js","import React, { Component } from 'react'\nimport { sendMessage } from '../../api/sockets'\n\nimport './styles.css'\n\nclass ChannelInput extends Component {\n    onSend() {\n        var input = document.getElementById(\"channel-input__input\")\n        sendMessage({\n            text: input.value,\n            pub_date: Date.now(),\n            user: \"Annonymous\",\n            channel: this.props.channel\n        })\n        input.value = \"\"\n    }\n    render() {\n        return (<div className=\"channel-input\">\n            <div className=\"channel-input__wrap\">\n                <input type=\"text\" id=\"channel-input__input\" />\n            </div>\n            <div id=\"channel-input__submit\" onClick={this.onSend.bind(this)}>\n                Send\n            </div>\n        </div>)\n    }\n}\n\nexport default ChannelInput\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ChannelInput/index.js","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport ChannelInput from '../../components/ChannelInput'\nimport MessageList from '../../components/MessageList'\nimport { openChannel, closeChannel } from '../../api/sockets'\n\nimport './styles.css';\n\nclass ChannelPage extends Component {\n    componentWillMount(){\n        var channel = this.props.match.params.channel\n        openChannel(channel)\n    }\n    componentWillUnmount(){\n        closeChannel();\n    }\n    render() {\n        var channel = this.props.match.params.channel\n        var messages = this.props.messages.filter((o)=>{\n            return o.channel == channel\n        })\n        return (\n            <div className=\"wrap channel-page\">\n                <MessageList messages={messages} />\n                <ChannelInput channel={channel}/>\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return { messages: state.messages }\n}\n\nexport default connect(mapStateToProps)(ChannelPage)\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/ChannelPage/index.js"],"sourceRoot":""}